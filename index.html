<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>Auke Count</title>
		<meta charset="UTF-8">
        <script src="http://jsconsole.com/remote.js?14008D71-D9D4-418F-A601-62E3A7106A2F"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/bootstrap-responsive.css">
		<link rel="stylesheet" href="css/fullcalendar.css">	
		<link rel="stylesheet" href="css/unicorn.css">
		<link rel="stylesheet" href="css/unicorn_002.css" class="skin-color">
	</head>
	<body>
		<div id="header">
		<h5>auke.us XXX</h5>
		</div>

		<div id="sidebar">
			<a href="#" class="visible-phone"><i class="icon icon-home"></i> Dashboard</a>
			<ul style="display: block;">
				<li class="active"><a href="#"><i class="icon icon-home"></i> <span>Dashboard</span></a></li>
				<li class="submenu">
					<a href="#"><i class="icon icon-th-list"></i> <span>Form</span> <span class="label">3</span></a>
					<ul>
						<li><a href="#">Common</a></li>
						<li><a href="#">Validation</a></li>
						<li><a href="#">Wizard</a></li>
					</ul>
				</li>
				<li><a href="#"><i class="icon icon-tint"></i> <span>Buttons &amp; icons</span></a></li>
				<li><a href="#"><i class="icon icon-pencil"></i> <span>Interface</span></a></li>
				<li><a href="#"><i class="icon icon-th"></i> <span>Tables</span></a></li>
				<li><a href="#"><i class="icon icon-th-list"></i> <span>Grid Layout</span></a></li>
				<li class="submenu">
					<a href="#"><i class="icon icon-file"></i> <span>Samples</span> <span class="label">4</span></a>
					<ul>
						<li><a href="#">Invoice</a></li>
						<li><a href="#">Support chat</a></li>
						<li><a href="#">Calendar</a></li>
						<li><a href="#">Gallery</a></li>
					</ul>
				</li>
				<li>
					<a href="#"><i class="icon icon-signal"></i> <span>Charts &amp; graphs</span></a>
				</li>
				<li>
					<a href="#"><i class="icon icon-inbox"></i> <span>Widgets</span></a>
				</li>
			</ul>

		</div>

		<div id="content">
		<div id="content-header">
			<div class="container-fluid order">
				<div class="row-fluid">
					<div class="span8">
						<div class="alert alert-info">
							This is <strong>Alert</strong>!<a href="#" data-dismiss="alert" class="close">×</a>
						</div>
						<div class="widget-box">
							<div class="widget-content">
								<div class="row-fluid">
								<div class="span12">
									<ul class="site-stats">
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">咖牛</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">泡牛</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">壽牛</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
									</ul>
								</div>
								</div>
								<div class="row-fluid">
									<ul class="site-stats">
										<li class="divider"></li>
									</ul>
								</div>
								<div class="row-fluid">
								<div class="span12">
									<ul class="site-stats">
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">咖豬</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">泡豬</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">壽豬</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
									</ul>
								</div>
								</div>
								<div class="row-fluid">
									<ul class="site-stats">
										<li class="divider"></li>
									</ul>
								</div>
								<div class="row-fluid">
								<div class="span12">
									<ul class="site-stats">
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">咖牛蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">泡牛蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">壽牛蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
									</ul>
								</div>
								</div>
								<div class="row-fluid">
									<ul class="site-stats">
										<li class="divider"></li>
									</ul>
								</div>
								<div class="row-fluid">
								<div class="span12">
									<ul class="site-stats">
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">咖豬蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">泡豬蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
										<li class="span4"><a class="pluss"><span class="label sum">0</span><span class="name">壽豬蛋</span></a><a href="#myModal" role="button" class="send" data-toggle="modal"><i class="icon-edit"></i></a></li>
									</ul>
								</div>
								</div>
								<div class="row-fluid">
									<div class="span9">
										<span id="amount">Amount:</span>
									</div>
									<div class="span3">
										<button class="btn btn-warning btn-large send"><i class="icon-white icon-ok-sign"></i>  確 認</button>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="span4">
						<div class="widget-box">
							<div class="widget-title">
								<span class="icon"><i class="icon-file"></i></span>
								<h5>Queue	</h5>
								<span class="label label-info tip-left" id="sum">0</span>
							</div>
							<div class="widget-content">
								<div class="row-fluid">
									<ul id="order-list" class="site-stats">
									</ul>
								</div>
								<div class="modal hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
											</div>
											<div class="modal-body">
											
											</div>
											<div class="empty"></div>
											<div class="modal-footer">
												<button id='order_submit' class="btn btn-primary" data-dismiss="modal" aria-hidden="true">OK</button>
											</div>
									</div>
								</div>
							
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>

		<script src="js/excanvas.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/jquery_003.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/jquery_004.js"></script>
		<script src="js/jquery_005.js"></script>
		<script src="js/jquery_002.js"></script>
		<script src="js/fullcalendar.js"></script>
		<script src="js/unicorn_002.js"></script>
		<script src="js/unicorn.js"></script>
		<script src="js/bootstrap-modal.js"></script>
		<script>
        var items = [];
            items.push = function(item) {
                item.id = order.serial();
                console.log('push: ' + JSON.stringify(item));
                return Array.prototype.push.apply(this, arguments);
            }

        var order = {
            _serial: 1,
            items : items,
            list: function() {
                console.log('list: ');
                $.each(this.items, function(i, item) {
                    console.log(JSON.stringify(item));
                });
                order.refresh();
            },
            refresh: function() {
                var target = $('#order-list');
                target.html('');
                var cheese = '';
                $.each(this.items, function(i, item) {
                    
                    cheese = '';
                    if (item && item.cheese) {
                        cheese = 
			    		'<div class="btn-group">'+
			    			 '<button class="btn btn-mini cheese active">起司</button>'+
			    		'</div>';
                    }
                    if (item) {
                    target.append(
                        '<li id="'+ item.id +'">' + 
                        '<span class="name"><strong>' + item.name + '</strong></span>' +
                        cheese +
                        '<a href="#" class="right"><i class="icon-trash"></i></a>' +
                        '</li>');
                    }
                });
            },
            find : function(id) {
                //console.log('find: ' + id);
                for (var i = 0 ; i < this.items.length; i++) {
                    if (this.items[i].id == id) {
                        //console.log('return: ' + JSON.stringify(items[i]));
                        return items[i];
                    }
                }
            },
            serial: function() {
                return this._serial++;
            },
            delete_item: function(id) {
                for (var i = 0 ; i < this.items.length; i++) {
                    if (this.items[i].id == id) {
                        //console.log('return: ' + JSON.stringify(items[i]));
                        this.items.splice(i,1);
                    }
                }
            }
        };
        
/*
        order.items.push({name:'a'});
        order.items.push({name:'b'});
        order.items.push({name:'c'});
        order.list();
        order.delete(1);
        order.list();
        order.delete(3);
        order.list();
        order.items.push({name:'a'});
        order.items.push({name:'b'});
        order.items.push({name:'c'});
        order.list();
 */


        var count = 0;
        $('.pluss').click(function() {
            var focus = $(this);
            var name = focus.find('.name').text();
            focus.find('.sum').text(parseInt(focus.find('.sum').text()) + 1);
            $(this).css('color','#08c');
			focus.find('.sum').addClass('label-important');

            order.items.push({name: name});
            order.list();

            count++;
            $('#sum').text(count);
        });
								
		$('.send').click(function(){
			var focus = $(this).prev().find('.name').text();
			var sum = parseInt($(this).prev().find('.sum').text());
			var modal = $('.modal-body');
			
			if (sum === 0) {
				return false;
			}
			
			modal.html('');

            var rice_plus, rice_minus, soy_plus, soy_minus, cheese;
            $.each(order.items, function(i, item) {
                if (focus === item.name) {
                    rice_plus = item.rice_plus ? 'active' : '';
                    rice_minus = item.rice_minus ? 'active' : '';
                    soy_plus = item.soy_plus ? 'active' : '';
                    soy_minus = item.soy_minus ? 'active' : '';
                    cheese = item.cheese ? 'active' : '';

			    	modal.append('<label>'+ focus + '</label>'
			    	+ '<div id ="' + item.id + '" class="btn-toolbar">'
			    	 	+ '<div class="btn-group">'
			    			+ '<button class="btn btn-large rice_plus ' + rice_plus + '"><i class="icon-plus"></i></button>'
			    			+ '<button class="btn btn-large rice_minus ' + rice_minus + '"><i class="icon-minus"></i></button>'
			    		+ '</div>'
			    		+ '<div class="btn-group">'
			    			+ '<button class="btn btn-large soy_plus ' + soy_plus + '"><i class="icon-arrow-up"></i></button>'
			    			+ '<button class="btn btn-large soy_minus ' + soy_minus + '"><i class="icon-arrow-down"></i></button>'
			    		+ '</div>'
			    		+ '<div class="btn-group">'
			    			+ '<button class="btn btn-large cheese ' + cheese + '">起司</button>'
			    		+ '</div>'
			    		+ '<div class="btn-group other">'
			    		+ '</div>'
			    		+ '<div class="btn-group dropdown">'
			    			+ '<button class="btn btn-large dropdown-toggle" data-toggle="dropdown">其它<span class="caret"></span></button>'
			    			+ '<ul class="dropdown-menu">'
			    				+ '<li>'
			    					+ '<button class="btn btn-mini">起司</button>'
			    					+ '<button class="btn btn-mini">蛋</button>'
			    					+ '<button class="btn btn-mini">肉</button>'
			    					+ '<button class="btn btn-mini">內用</button>'
			    					+ '<button class="btn btn-mini">泡菜</button>'
			    				+ '</li>'
			    			+ '</ul>'
			    		+ '</div>'
			    	+ '</div>')};
                });

			});
			
			
			$('.modal-body .btn:not(.btn-mini)').live('click', function(){
				var focus = $(this);
				var group = focus.parent();
				
				if (focus.hasClass('active')) {
					focus.removeClass('active');
				} else {
					group.find('.btn').removeClass('active');
					focus.addClass('active');
				}
			});

			$('.modal-body .btn-mini').live('click', function(){
				var focus = $(this).clone();
				var target = $(this).parent().parent().parent().prev();

                focus.attr('class', 'btn btn-large active');
                target.append(focus);
			});

            $('.other .btn').live('click', function() {
				$(this).remove();
            });
            
            
            $('.icon-trash').live('click', function(){
            	var cancle = $(this).parent().parent();
            	var id = cancle.attr('id');
                order.delete_item(id);
            	order.refresh();
            });

            $('#order_submit').click(function() {
                var details = $('.btn-toolbar');
                var that;
                $.each(details, function(i, detail) {
                    that = $(detail);
                    item = order.find(that.attr('id'));
                    delete(item.rice_plus);
                    delete(item.rice_minus);
                    delete(item.soy_plus);
                    delete(item.soy_minus);
                    delete(item.cheese);
                    if (that.find('.rice_plus').hasClass('active')) {
                        item.rice_plus = true;
                    }
                    if (that.find('.rice_minus').hasClass('active')) {
                        item.rice_minus = true;
                    }
                    if (that.find('.soy_plus').hasClass('active')) {
                        item.soy_plus = true;
                    }
                    if (that.find('.soy_minus').hasClass('active')) {
                        item.soy_minus = true;
                    }
                    if (that.find('.cheese').hasClass('active')) {
                        item.cheese = true;
                    }
                    order.list();
                });
            });
		
					
					
					
			</script>


<ul class="typeahead dropdown-menu"></ul></body></html>
